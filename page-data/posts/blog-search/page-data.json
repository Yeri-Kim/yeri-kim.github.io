{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/blog-search/","webpackCompilationHash":"fe3d1c87e9198eed07cc","result":{"data":{"markdownRemark":{"id":"f7cebb60-23e1-5b3c-abc8-e72338413e92","html":"<h2 id=\"검색이-가능한지-알아보기\"><a href=\"#%EA%B2%80%EC%83%89%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%9C%EC%A7%80-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"검색이 가능한지 알아보기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검색이 가능한지 알아보기</h2>\n<p>gatsby는 graphql 기반이기 때문에, graphql 쿼리로 검색이 가능한지 먼저 알아보겠습니다.\n개발 서버를 띄우면 터미널에 아래의 설명이 나옵니다.</p>\n<blockquote>\n<p>View GraphiQL, an in-browser IDE, to explore your site’s data and schema\n<a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a></p>\n</blockquote>\n<p>위의 주소로 들어가면 gatsby 블로그의 데이터와 스키마를 전부 볼 수 있고, 궁금한 쿼리도 직접 쳐볼 수 있습니다.\n<img src=\"/media/190810-1.png\"></p>\n<p>왼쪽 사이드는 가능한 쿼리 목록이 있고, 오른쪽 사이드는 스키마를 볼 수 있습니다.\ngatsby 블로그는 미리 정의된 쿼리로 포스팅 목록 페이지, 포스팅 페이지, 카테고리 페이지 등을 정적으로 만들어주는 것입니다.</p>\n<p>그래서 만약 단어로 포스팅 목록을 가져오는 쿼리를 알 수 있다면, gatsby blog를 커스터마이징 할 수 있다는 희망이 있는 것이죠.</p>\n<p>일단 연습도 해볼겸 전체 목록을 가져오는 쿼리를 보겠습니다.\n<img src=\"/media/190810-2.png\"></p>\n<p>제가 검색한건 모든 markdown 을 가져오되, 필터조건은 template이 post이고, draft는 true가 아닌 것입니다.\n그리고 쿼리 결과는 포스팅의 title만 가져오도록 했습니다.</p>\n<p>저는 이전 실무에서 graphql, relay 을 한 적이 있어서 쿼리에 익숙하지만, 익숙하지도 않고 처음에 어떤 쿼리를 해봐야할지 모르겠다면\ngatsby 소스코드에서 이미 정의된 쿼리를 검색해서 해보면 됩니다.\n위의 쿼리도 <code class=\"language-text\">/src/templates/index-template.js</code> 에 있던 쿼리를 가져온 것입니다.</p>\n<p>그럼 이제 특정 단어가 들어간 포스팅 목록을 가져오는 쿼리를 작성해볼까요? 실제 쿼리가 잘 됐는지 확인하기 위해 이번에는 결과에 포스팅 목록까지 가져오겠습니다.</p>\n<p>넹!! 필터조건 하나 추가했는데 잘 나오는군요?\n<img src=\"/media/190810-3.png\"></p>\n<p>쿼리는 아래와 같습니다. 포함하고 싶은 단어를 정규 표현식으로 필터링했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> MyQuery <span class=\"token punctuation\">{</span>\n  allMarkdownRemark<span class=\"token punctuation\">(</span><span class=\"token attr-name\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">frontmatter</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">draft</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">ne</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">template</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"post\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">rawMarkdownBody</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">regex</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/react native/i\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    edges <span class=\"token punctuation\">{</span>\n      node <span class=\"token punctuation\">{</span>\n        frontmatter <span class=\"token punctuation\">{</span>\n          title\n        <span class=\"token punctuation\">}</span>\n        rawMarkdownBody\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>네! 쿼리를 찾으니 왠지 블로그에 검색기능을 추가할 수 있을 것만 같네요!\n그런데 여기까지 하자마자 제가 잘 못 생각했다는 것을 깨달았습니다.</p>\n<h3 id=\"결론\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h3>\n<p>gatsby blog는 정적이므로 검색이 가능하게 하려면 검색 할 것만 같은 단어를 미리 다 정의한 후에\n검색 결과 페이지를 정적으로 생성해놔야합니다.\n네.. 제 머리로는 할 수 없다는 것으로 잠정 결론 내리고 search 대신에 tag목록을 활용해서 포스팅을 쉽게 찾을 수 있도록 전략을 바꾸겠습니다 ㅠㅠ</p>\n<h3 id=\"관련-포스팅\"><a href=\"#%EA%B4%80%EB%A0%A8-%ED%8F%AC%EC%8A%A4%ED%8C%85\" aria-label=\"관련 포스팅 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관련 포스팅</h3>\n<p><a href=\"https://yeri-kim.github.io/posts/blog-search/\">gatsby 블로그에 태그목록 추가하기</a></p>","fields":{"slug":"/posts/blog-search/","tagSlugs":["/tag/gatsby/","/tag/graqhql/"]},"frontmatter":{"date":"2019-08-10T05:43:32.169Z","description":"gatsby로 만든 블로그에 검색기능을 추가해보려고 합니다. 어떻게 추가할 수 있을까요?","tags":["gatsby","graqhql"],"title":"gatsby 블로그에 검색기능을 추가할 수 있을까?"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/blog-search/"}}}