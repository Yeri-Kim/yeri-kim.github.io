{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/webpack/","webpackCompilationHash":"bb591ce2000079d4289b","result":{"data":{"markdownRemark":{"id":"fb6eab4c-8c68-5710-af1f-3b0f286c5b38","html":"<p><a href=\"https://wecode.co.kr\">위코드</a> 프론트앤드 스터디 준비를 위한 포스팅입니다!</p>\n<h2 id=\"73-웹팩-초급편\"><a href=\"#73-%EC%9B%B9%ED%8C%A9-%EC%B4%88%EA%B8%89%ED%8E%B8\" aria-label=\"73 웹팩 초급편 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.3 웹팩 초급편</h2>\n<p>웹팩은 <code class=\"language-text\">모듈 번들러</code>다. 모듈은 하나의 파일이라고 생각하면 된다.\n번들은 여러 파일을 합쳐서 하나의 파일을 만들어준 결과 파일이라고 생각하면 된다.</p>\n<p>번들러는 번들을 해주는 것이다. 그래서 웹팩은 <code class=\"language-text\">모듈 번들러</code> 이다.</p>\n<p>웹팩, 바벨 등등 온갖 프론트 용어가 난무하므로 항상 깔끔하게 한 문장으로 정리해서 머리속에 입력하는 습관이 필요하다.</p>\n<h4 id=\"웹팩이-필요한-이유\"><a href=\"#%EC%9B%B9%ED%8C%A9%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"웹팩이 필요한 이유 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹팩이 필요한 이유</h4>\n<p>CRA로 프로젝트를 생성할 때는 웹팩을 직접 설정하지 않았다. 이미 내장되어있기 때문이다. 그래서 웹팩의 존재를 모를 수 있다.\n하지만 CRA로 프로젝트를 만들지 않으면 웹팩 설정을 일일이 해주어야 하며, CRA를 사용하지 않는 회사도 많기 때문에 웹팩을 사용할줄 알아야 한다.</p>\n<p>react에서 컴포넌트를 작성할 때 한 파일에 하나의 컴포넌트를 정의했다.\n너무 당연한 개발방식처럼 느껴지겠지만, pre course에 했던 게임 숙제를 생각해보자.\n<code class=\"language-text\">index.html</code> 파일에서 마지막에 script 태그로 JavaScript 파일을 가져왔다.\n이때 파일 순서가 중요했다. 그래서 Hero, Enemy 정의한 파일 먼저 작성하고 마지막에 init.js에서\nHero, Enemy를 가져와서 썼다.\n브라우저에서 파일을 순서대로 로드하기 때문에 변수를 먼저 선언하고나서야 다른 파일에서 해당 변수를 쓸 수 있었기 때문이다.</p>\n<p>이런식은 변수를 선언하면 전역변수가 되며, 직접 namespace를 만들어줘야하고, 파일 순서도 중요하고…\n점점 파일이 많아지면서 서로 종속관계의 알기 어렵고 순서를 맞추기도 복잡해진다.\n이런 문제들을 웹팩이 해결해준다.</p>\n<h3 id=\"731-웹팩-실행하기\"><a href=\"#731-%EC%9B%B9%ED%8C%A9-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"731 웹팩 실행하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.3.1 웹팩 실행하기</h3>\n<h4 id=\"설정파일-이용하기\"><a href=\"#%EC%84%A4%EC%A0%95%ED%8C%8C%EC%9D%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"설정파일 이용하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정파일 이용하기</h4>\n<p>프로젝트 루트에 <code class=\"language-text\">webpack.config.js</code> 파일을 만들어 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;build&quot;: &quot;rm -rf dist &amp;&amp; NODE_ENV=production webpack&quot;</code></pre></div>\n<p>process.env.NODE_ENV 같은 경우 package.json script에 추가해 놓았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  mode<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token punctuation\">,</span>\n  output<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    filename<span class=\"token punctuation\">:</span> <span class=\"token string\">'js/main.js'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>mode가 프로덕션이면 자바스크립트 코드 압축을 포함한 여러가지 최적화 기능이 기본으로 들어간다.\n압축하고 싶지 않으면 <code class=\"language-text\">optimization: { minimizer: [] }</code> 를 추가한다.</p>\n<p>웹팩 번들 후의 파일은 제대로 보고 분석한 적이 없는데 책에 잘 설명되어 있다.</p>\n<h3 id=\"732-로더-사용하기\"><a href=\"#732-%EB%A1%9C%EB%8D%94-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"732 로더 사용하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.3.2 로더 사용하기</h3>\n<p>로더(loader)는 모듈을 입력으로 받아서 원하는 형태로 변환한 후 새로운 모듈을 출력해주는 함수다.\njs, img, css, csv 파일 등 모든 파일은 모듈이 될 수 있다.</p>\n<h4 id=\"babel-loader\"><a href=\"#babel-loader\" aria-label=\"babel loader permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>babel-loader</h4>\n<p>자바스크립트 파일을 처리한다. 예를 들어 jsx 문법으로 작성된 리액트 코드를 처리할 때도 필요하다.\nbabel 세팅도 해야한다. @babel/preset-react 프리셋을 사용하도록 설정한다. (babel 내용은 앞에서)</p>\n<p>webpack.config.js 중 일부분 - js 확장자를 갖는 모듈은 babel-loader가 처리하도록 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  rules<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n     <span class=\"token punctuation\">{</span>\n       test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span>\n       exclude<span class=\"token punctuation\">:</span> <span class=\"token regex\">/node_modules/</span><span class=\"token punctuation\">,</span>\n       use<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">]</span>\n     <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"css-loader\"><a href=\"#css-loader\" aria-label=\"css loader permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>css-loader</h4>\n<p>로더를 배열로 입력하면 오른쪽 로더부터 실행한다.\nsass를 사용하기 위해 sass-loader를 추가했고, js 마다 css를 import해서 사용할 수 있도록\nMiniCssExtractPlugin.loader 를 사용하였다. 하지만 책에 의하면 css-module을 사용하는게 더 편리할 것 같다. 다음에 세팅해봐야지</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token punctuation\">{</span>\n    test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.(sa|sc)ss$/</span><span class=\"token punctuation\">,</span>\n    use<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      MiniCssExtractPlugin<span class=\"token punctuation\">.</span>loader<span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'css-loader'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'sass-loader'</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"file-loader\"><a href=\"#file-loader\" aria-label=\"file loader permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>file-loader</h4>\n<p>파일로더를 사용하지 않으면 root 경로에 모든 파일이 번들된다.\n개발모드에서 사용한 경로대로 그대로 파일이 번들되길 바라면 file-loader를 사용하자.\n그리고 name설정을 하지 않으면 파일 이름에 해시값이 포함되며 브라우저 캐싱효과를 활용할 수 있다.\n이전에 설정할 때 왜 이미지 파일이름에 해시값이 포함되지 않고 같은 이름으로 하게 했는지 기억이 나지 않는다.\n아마도 css에서 해당 파일을 읽어오지 못해서 그랬던 걸까?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.(png|jpe?g|gif|svg)$/i</span><span class=\"token punctuation\">,</span>\n    use<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        loader<span class=\"token punctuation\">:</span> <span class=\"token string\">'file-loader'</span><span class=\"token punctuation\">,</span>\n        options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          name<span class=\"token punctuation\">:</span> <span class=\"token string\">'[path][name].[ext]'</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"733-플러그인-사용하기\"><a href=\"#733-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"733 플러그인 사용하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.3.3 플러그인 사용하기</h3>\n<p>플러그인은 로더보다 강력한 기능을 갖는다. 로더는 특정 모듈에 대한 처리만 담당하지만 플러그인은 웹팩이 실행되는 전체 과정에 개입할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">MiniCssExtractPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      filename<span class=\"token punctuation\">:</span> <span class=\"token string\">'[name].css'</span><span class=\"token punctuation\">,</span>\n      chunkFilename<span class=\"token punctuation\">:</span> <span class=\"token string\">'[id].css'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">HtmlWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      template<span class=\"token punctuation\">:</span> <span class=\"token string\">'./src/index.html'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>js 파일이 번들 될 때마다 바뀌는 경우라면 매번 index.html을 수정해주어야 한다.\nHtmlWebpackPlugin을 설치하면 자동으로 js 파일을 추가해준다.</p>","fields":{"slug":"/posts/webpack/","tagSlugs":["/tag/webpack/"]},"frontmatter":{"date":"2019-10-30T04:46:32.169Z","description":"7.3 정리","tags":["webpack"],"title":"웹팩(webpack)"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/webpack/"}}}